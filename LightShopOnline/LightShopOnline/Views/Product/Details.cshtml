@model LightShopOnline.Models.Product

@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_ProductDetailsLayout.cshtml";
}

<div id="content" class="site-content">
    <div class="page-title-area">
        <div class="ht-container">
            <div class="ht-col-md-12 ht-col-sx-12 ht-center-md">
                <div class="breadcrumb-content">
                    <ul>
                        <li>@Html.ActionLink("Trang chủ", "Index", "Home")</li>
                        <li>Sản phẩm</li>
                        <li>@Html.DisplayFor(model => model.Product_Name)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div id="primary" class="shop-area parlopage-padding">
        <main id="main" class="site-main" role="main">
            <div class="ht-container">
                <div class="ht-row">
                    <div class="ht-col-md-12 ht-col-xs-12">

                        <div class="woocommerce-notices-wrapper"></div>
                        <div id="product-58" class="product type-product post-58 status-publish first instock product_cat-accessories has-post-thumbnail sale featured shipping-taxable purchasable product-type-simple">

                            <div class="ht-row">
                                <div class="ht-col-md-6 ht-col-sm-6 ht-col-xs-12">

                                    <span class="onsale">Sale!</span>

                                    <div class="woocommerce-product-gallery woocommerce-product-gallery--with-images woocommerce-product-gallery--columns-4 images" data-columns="4" style="opacity: 1; transition: opacity 0.25s ease-in-out 0s;">
                                        <a href="@Url.Action("Details", new { id=0 })" class="woocommerce-product-gallery__trigger" hidden><img draggable="false" role="img" class="emoji" alt="🔍" src="~/asset/img/1f50d.svg"></a>

                                        
                                        <div class="flex-viewport" style="overflow: hidden; position: relative; height: 568px;">
                                            <figure class="woocommerce-product-gallery__wrapper" style="width: 800%; transition-duration: 0s; transform: translate3d(0px, 0px, 0px);">
                                                <div data-thumb="" data-thumb-alt="" class="woocommerce-product-gallery__image flex-active-slide" style="position: relative; overflow: hidden; width: 568px; margin-right: 0px; float: left; display: block;">
                                                    <a href="~/asset/img/@Html.DisplayFor(model => model.Picture1)">
                                                        <img width="600" height="600" src="~/asset/img/@Html.DisplayFor(model => model.Picture1)" class="wp-post-image" alt="" loading="lazy" title="product_12" data-caption="" data-large_image_width="800" data-large_image_height="800" sizes="(max-width: 600px) 100vw, 600px" draggable="false">
                                                    </a>
                                                    <img role="presentation" alt="" src="~/asset/img/@Html.DisplayFor(model => model.Picture1)" class="zoomImg" style="position: absolute; top: -138.465px; left: -221.176px; opacity: 0; width: 800px; height: 800px; border: none; max-width: none; max-height: none;">
                                                </div>
                                            </figure>
                                        </div>

                                    </div>

                                </div>

                                <div class="ht-col-md-6 ht-col-sm-6 ht-col-xs-12">
                                    <div class="summary entry-summary product-details-content">
                                        <h1 class="product_title entry-title">@Html.DisplayFor(model => model.Product_Name)</h1>
                                        <p class="price">
                                            <del aria-hidden="true">
                                                <span class="woocommerce-Price-amount amount">
                                                    <bdi>@Html.DisplayFor(model => model.Price)<span class="woocommerce-Price-currencySymbol">VNĐ</span></bdi>
                                                </span>
                                            </del>
                                            <ins>
                                                <span class="woocommerce-Price-amount amount">
                                                    <bdi>@Html.DisplayFor(model => model.Discount)<span class="woocommerce-Price-currencySymbol">VNĐ</span></bdi>
                                                </span>
                                            </ins>
                                        </p>


                                        <div class="woocommerce-tabs wc-tabs-wrapper">
                                            <div class="woocommerce-Tabs-panel woocommerce-Tabs-panel--description panel entry-content wc-tab" id="tab-description" role="tabpanel" aria-labelledby="tab-title-description" style="">



                                                <p>Nhãn hiệu: @Html.DisplayFor(model => model.Brand)</p>
                                                <p>Màu sắc: @Html.DisplayFor(model => model.Color)</p>
                                                <p>Kích thước: @Html.DisplayFor(model => model.Size)</p>
                                                <p>Bảo hành: @Html.DisplayFor(model => model.Warrant)</p>
                                            </div>
                                        </div>

                                        <div class="cart">
                                            <div class="quantity">
                                                <label class="screen-reader-text" for="quantity_product">Quantity</label>
                                                <input type="number" id="quantity_product" class="input-text qty text" step="1" min="1" max="" name="quantity" value="1" title="Qty" size="4" placeholder="" inputmode="numeric">
                                            </div>

                                            <button type="submit" name="add-to-cart" value="@Model.Product_Id" class="single_add_to_cart_button button alt" onclick="addProduct(this)">
                                                Thêm vào giỏ hàng
                                            </button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <h2 class="text-center" align="center">Chi tiết sản phẩm</h2>
                            <div class="woocommerce-product-details__short-description">

                                @Html.Raw(Model.Description)
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </main><!-- #main -->
    </div><!-- #primary -->


</div><!-- #content -->

@Html.Partial("js-foot_ProductDetails")
<!-- Page specific script -->
<script src="~/adminlte/plugins/sweetalert2/sweetalert2.min.js"></script>
<!-- Toastr -->
<script src="~/adminlte/plugins/toastr/toastr.min.js"></script>

<script>
        var Toast = Swal.mixin({
            toast: true,
            position: 'top-end',
            showConfirmButton: false,
            timer: 3000
        });

        function successClick() {
            Toast.fire({
                icon: 'success',
                title: 'Thêm sản phẩm vào giỏ hàng thành công'
            })
        }

        function addProduct(objButton) {
            // get data
            var productId = objButton.value;
            var quantity = $('#quantity_product').val();

            var formData = new FormData();
            formData.append("quantity", quantity);

            var sendurl = '@ViewBag.GuestHost/api/OrderDetailAPI/' + productId;
            // send request
            $.ajax({
                data: formData,
                type: "POST",
                url: sendurl,
                cache: false,
                contentType: false,
                processData: false,
                success: function (cartCount) {
                    // update minicart-number
                    $('.minicart-counter').eq(0).html(cartCount);
                    successClick();
                },
                error: function (data) {
                    alert(data.responseText);
                }
            })
        }

</script>